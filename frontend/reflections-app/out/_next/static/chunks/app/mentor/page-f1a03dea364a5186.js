(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{2601:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(8960)},3266:function(e,t,n){Promise.resolve().then(n.bind(n,706))},706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MentorPage}});var r=n(7437),i=n(2265),s=n(2601);let l=s.env.NEXT_PUBLIC_OAA_API_BASE;async function j(e,t){let n=await fetch("".concat(l).concat(e),{headers:{"Content-Type":"application/json"},...t});if(!n.ok)throw Error("".concat(e," -> ").concat(n.status));return n.json()}var o={health:()=>j("/health"),keys:()=>j("/.well-known/oaa-keys.json"),filter:e=>j("/oaa/filter",{method:"POST",body:JSON.stringify(e)}),ingest:e=>j("/oaa/ingest/snapshot",{method:"POST",body:JSON.stringify(e)}),verify:e=>j("/oaa/verify",{method:"POST",body:JSON.stringify(e)}),sources:()=>j("/oaa/sources")};function sentences(e){return e.split(RegExp("(?<=[\\.\\?\\!])\\s+","g")).map(e=>e.trim()).filter(Boolean)}function normTokens(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(Boolean)}function jaccard(e,t){let n=new Set(normTokens(e)),r=new Set(normTokens(t)),i=new Set([...n].filter(e=>r.has(e))).size,s=new Set([...n,...r]).size||1;return i/s}function synthesizeWeighted(e,t){let n=new Map;Object.entries(e).forEach(e=>{var r;let[i,s]=e,l=null!==(r=t[i])&&void 0!==r?r:0;l<=0||sentences(s).forEach(e=>{let t=e.trim();t&&n.set(t,(n.get(t)||0)+l)})});let r=[...n.entries()].sort((e,t)=>t[1]-e[1]||t[0].length-e[0].length).map(e=>{let[t]=e;return t}),i=[];return r.forEach(e=>{let t=i.some(t=>jaccard(t,e)>.85);t||i.push(e)}),i.length>0&&(i.unshift("**Thesis:**"),i.push("\n**Examples:**\n- …\n- …"),i.push("\n**Takeaway:** …")),i.join(" ")}function MentorPage(){var e,t;let[n,s]=(0,i.useState)("michael"),[l,C]=(0,i.useState)("michael"),[O,E]=(0,i.useState)(null),[R,A]=(0,i.useState)(!1),[z,I]=(0,i.useState)("Explain gravity to a teen."),[D,B]=(0,i.useState)(""),[N,W]=(0,i.useState)(!1),[P,M]=(0,i.useState)(null),[L,F]=(0,i.useState)(null),[J,U]=(0,i.useState)(null),[H,G]=(0,i.useState)({}),[Q,V]=(0,i.useState)(!1),[X,Y]=(0,i.useState)(["gemini","claude","deepseek","perplexity"]),[$,K]=(0,i.useState)({}),Z=(0,i.useRef)(!1),[ee,et]=(0,i.useState)(!1),[en,er]=(0,i.useState)({gemini:.25,claude:.25,deepseek:.25,perplexity:.25}),[ei,es]=(0,i.useState)(!1),[el,eo]=(0,i.useState)(null),[ea,ec]=(0,i.useState)(null),[ed,eu]=(0,i.useState)(null),[ep,eh]=(0,i.useState)(null),[ef,ey]=(0,i.useState)("");(0,i.useEffect)(()=>{n&&!Z.current&&(async()=>{try{A(!0);let e={session_id:"session_".concat(Date.now()),mentors:X,started_at:new Date().toISOString()};C(n),E(e.session_id),Z.current=!0,F({wallet:"wallet_".concat(n),balance:100,last_tx_id:null})}catch(t){var e;U(null!==(e=t.message)&&void 0!==e?e:String(t))}finally{A(!1)}})()},[n]),(0,i.useEffect)(()=>{(async()=>{try{ec(await o.health()),eu(await o.keys())}catch(e){ey(e.message)}})()},[]);let eg=(0,i.useMemo)(()=>!!O&&!!l&&z.trim()&&D.trim(),[O,l,z,D]);async function onSubmit(){try{W(!0),U(null);let e={attestation_id:"attest_".concat(Date.now()),xp_awarded:Math.floor(50*Math.random())+10,level_before:1,level_after:2,reward_tx_id:"tx_".concat(Date.now()),balance_after:150};M(e),F(t=>t?{...t,balance:e.balance_after||t.balance}:null)}catch(t){var e;U(null!==(e=t.message)&&void 0!==e?e:String(t))}finally{W(!1)}}async function getDrafts(){if(O&&z.trim())try{V(!0),U(null);let e={gemini:"This is a mock response from Gemini about the topic.",claude:"Here's Claude's perspective on the subject matter.",deepseek:"DeepSeek provides this analysis of the question.",perplexity:"Perplexity offers this comprehensive answer."};G(e);let t=Object.keys(e);K(Object.fromEntries(t.map(e=>[e,!0])))}catch(t){var e;U(null!==(e=t.message)&&void 0!==e?e:String(t))}finally{V(!1)}}function insertDraft(e){B(t=>t?t+"\n\n---\n"+e:e)}function toggleMentor(e){Y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}function toggleChecked(e){K(t=>({...t,[e]:!t[e]}))}function onCombineSimple(){let e=Object.entries($).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t]=e;return t});if(0===e.length)return;let t=Object.fromEntries(e.map(e=>[e,1])),n=synthesizeWeighted(Object.fromEntries(e.map(e=>[e,H[e]])),t);insertDraft(n)}function onCombineWeighted(){et(!0)}function applyWeights(){let e=Object.keys(H).filter(e=>{var t;return(null!==(t=en[e])&&void 0!==t?t:0)>0});if(0===e.length)return et(!1);let t={};e.forEach(e=>{t[e]=H[e]});let n=synthesizeWeighted(t,en);insertDraft(n),et(!1)}async function runCritique(){if(O&&D.trim())try{es(!0),U(null),eo({rubric:{accuracy:4,depth:3,originality:4,integrity:5},critique:"This is a mock critique of your answer. The response shows good understanding of the topic with accurate information and demonstrates integrity in the approach."})}catch(t){var e;U(null!==(e=t.message)&&void 0!==e?e:String(t))}finally{es(!1)}}let runOaaVerify=async()=>{try{let e={statement:"hello",sig:"",pub:"",ts:new Date().toISOString()};eh(await o.verify(e))}catch(e){ey(e.message)}};return(0,r.jsxs)("div",{style:{maxWidth:1100,margin:"40px auto",padding:"0 20px",lineHeight:1.5},children:[(0,r.jsx)("h1",{children:"Lab7 — Online Apprenticeship Agent"}),(0,r.jsx)("p",{style:{marginTop:4,opacity:.85},children:(0,r.jsx)("em",{children:'"Initializing Lab7-proof (OAA) — Mentor–Apprentice Integrity Framework."'})}),(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"\uD83E\uDDE0 OAA Console"}),ef&&(0,r.jsxs)("div",{style:{color:"#b00020",marginBottom:12},children:["OAA Error: ",ef]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{style:m,children:[(0,r.jsx)("h4",{style:{marginTop:0,marginBottom:8},children:"Health"}),(0,r.jsx)("pre",{style:w,children:JSON.stringify(ea,null,2)})]}),(0,r.jsxs)("div",{style:m,children:[(0,r.jsx)("h4",{style:{marginTop:0,marginBottom:8},children:"Current Public Keys"}),(0,r.jsx)("pre",{style:w,children:JSON.stringify(ed,null,2)})]})]}),(0,r.jsxs)("div",{style:{marginTop:12},children:[(0,r.jsx)("h4",{style:{marginTop:0,marginBottom:8},children:"Verify (sample)"}),(0,r.jsx)("button",{style:y,onClick:runOaaVerify,children:"Run verify"}),ep&&(0,r.jsx)("pre",{style:{...w,marginTop:8},children:JSON.stringify(ep,null,2)})]})]}),(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"1) User"}),(0,r.jsxs)("div",{style:c,children:[(0,r.jsx)("label",{style:d,children:"Handle"}),(0,r.jsx)("input",{style:u,value:n,onChange:e=>{Z.current=!1,s(e.target.value),E(null),M(null),F(null),G({}),K({}),eo(null)},placeholder:"your-handle"})]}),(0,r.jsx)("div",{style:{fontSize:14,opacity:.8,marginTop:8},children:R?"Starting session...":O?"Session: ".concat(O):"No session yet"})]}),(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"2) Task"}),(0,r.jsxs)("div",{style:c,children:[(0,r.jsx)("label",{style:d,children:"Prompt"}),(0,r.jsx)("textarea",{style:p,rows:3,value:z,onChange:e=>I(e.target.value)})]}),(0,r.jsxs)("div",{style:{...c,marginTop:4},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:6},children:"Mentors"}),(0,r.jsx)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:["gemini","claude","deepseek","perplexity"].map(e=>(0,r.jsxs)("label",{style:chip(X.includes(e)),children:[(0,r.jsx)("input",{type:"checkbox",checked:X.includes(e),onChange:()=>toggleMentor(e),style:{marginRight:6}}),e]},e))}),(0,r.jsxs)("div",{style:{display:"flex",gap:10,marginTop:10},children:[(0,r.jsx)("button",{style:f,disabled:!O||Q||0===X.length,onClick:getDrafts,children:Q?"Getting drafts…":"Get Drafts"}),(0,r.jsx)("button",{style:y,disabled:0===Object.keys(H).length,onClick:onCombineSimple,children:"Combine Selected → Answer"}),(0,r.jsx)("button",{style:g,disabled:0===Object.keys(H).length,onClick:onCombineWeighted,children:"Synthesize (weights)"})]})]}),Object.keys(H).length>0&&(0,r.jsxs)("div",{style:{...m,marginTop:12},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Drafts"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:Object.entries(H).map(e=>{let[t,n]=e;return(0,r.jsxs)("div",{style:S,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!$[t],onChange:()=>toggleChecked(t)}),(0,r.jsx)("strong",{style:{textTransform:"capitalize"},children:t})]}),(0,r.jsx)("div",{style:{display:"flex",gap:8},children:(0,r.jsx)("button",{style:y,onClick:()=>insertDraft(n),children:"Insert"})})]}),(0,r.jsx)("pre",{style:w,children:n})]},t)})})]}),(0,r.jsxs)("div",{style:c,children:[(0,r.jsx)("label",{style:d,children:"Your Answer"}),(0,r.jsx)("textarea",{style:p,rows:10,value:D,onChange:e=>B(e.target.value)})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,r.jsx)("button",{style:h,disabled:!eg||N,onClick:onSubmit,children:N?"Submitting…":"Submit for Rubric → XP → Attest → Reward"}),(0,r.jsx)("button",{style:y,disabled:!D.trim()||ei,onClick:runCritique,children:ei?"Critiquing…":"Critique Answer"})]}),J&&(0,r.jsxs)("div",{style:{marginTop:12,color:"#b00020",whiteSpace:"pre-wrap"},children:[(0,r.jsx)("strong",{children:"Error:"})," ",J]})]}),el&&(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"Critique & Rubric"}),(0,r.jsx)("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:8},children:["accuracy","depth","originality","integrity"].map(e=>(0,r.jsxs)("div",{style:T,children:[(0,r.jsxs)("strong",{style:{textTransform:"capitalize"},children:[e,":"]})," ",el.rubric[e]," / 5"]},e))}),(0,r.jsx)("pre",{style:w,children:el.critique})]}),(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"3) Results"}),P?(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,r.jsxs)("div",{style:m,children:[(0,r.jsxs)("div",{style:b,children:[(0,r.jsx)("span",{children:"XP Awarded"}),(0,r.jsx)("strong",{children:P.xp_awarded})]}),(0,r.jsxs)("div",{style:b,children:[(0,r.jsx)("span",{children:"Level"}),(0,r.jsxs)("strong",{children:[P.level_before," → ",P.level_after]})]}),(0,r.jsxs)("div",{style:b,children:[(0,r.jsx)("span",{children:"Attestation"}),(0,r.jsx)("code",{style:v,children:P.attestation_id})]})]}),(0,r.jsxs)("div",{style:m,children:[(0,r.jsxs)("div",{style:b,children:[(0,r.jsx)("span",{children:"Reward Tx"}),(0,r.jsx)("code",{style:v,children:null!==(e=P.reward_tx_id)&&void 0!==e?e:"—"})]}),(0,r.jsxs)("div",{style:b,children:[(0,r.jsx)("span",{children:"Balance After"}),(0,r.jsx)("strong",{children:null!==(t=P.balance_after)&&void 0!==t?t:"—"})]})]})]}):(0,r.jsx)("div",{style:{opacity:.7},children:"No submission yet."})]}),(0,r.jsxs)("section",{style:a,children:[(0,r.jsx)("h3",{style:x,children:"4) Wallet"}),L?(0,r.jsxs)("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Wallet:"})," ",(0,r.jsx)("code",{style:v,children:L.wallet})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Balance:"})," ",L.balance]})]}):(0,r.jsx)("div",{style:{opacity:.7},children:"No balance yet."})]}),ee&&(0,r.jsx)("div",{style:_,children:(0,r.jsxs)("div",{style:k,children:[(0,r.jsx)("h3",{style:{marginTop:0},children:"Synthesize (weights)"}),(0,r.jsx)("p",{style:{marginTop:-6,opacity:.8},children:"Adjust mentor weights (sum doesn't need to be 1; we normalize internally)."}),Object.keys(H).map(e=>{var t,n;return(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr 50px",gap:10,alignItems:"center",marginBottom:8},children:[(0,r.jsx)("div",{style:{textTransform:"capitalize"},children:e}),(0,r.jsx)("input",{type:"range",min:0,max:100,step:5,value:(null!==(t=en[e])&&void 0!==t?t:0)*100,onChange:t=>er(n=>({...n,[e]:Number(t.target.value)/100}))}),(0,r.jsxs)("div",{children:[Math.round((null!==(n=en[e])&&void 0!==n?n:0)*100),"%"]})]},e)}),(0,r.jsxs)("div",{style:{display:"flex",gap:10,marginTop:12},children:[(0,r.jsx)("button",{style:h,onClick:applyWeights,children:"Apply"}),(0,r.jsx)("button",{style:g,onClick:()=>et(!1),children:"Cancel"})]})]})}),(0,r.jsx)("footer",{style:{marginTop:32,opacity:.7,fontSize:13},children:"Powered by OAA Orchestrator ↔ Rubric ↔ Citizen Shield ↔ GIC Indexer."})]})}let a={border:"1px solid #e5e7eb",borderRadius:12,padding:16,marginTop:16,background:"#fff"},c={display:"flex",flexDirection:"column",gap:8,marginBottom:12},d={fontWeight:600},u={padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:8,fontSize:14},p={...u,minHeight:120},h={padding:"10px 14px",borderRadius:8,border:"1px solid #111827",background:"#111827",color:"#fff",fontWeight:600,cursor:"pointer"},f={...h,background:"#ffffff",color:"#111827",borderColor:"#111827"},y={padding:"6px 10px",borderRadius:8,border:"1px solid #111827",background:"#111827",color:"#fff",fontWeight:600,cursor:"pointer",fontSize:12},g={padding:"6px 10px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",color:"#111827",cursor:"pointer",fontSize:12},x={marginTop:0,marginBottom:12},m={border:"1px solid #e5e7eb",borderRadius:10,padding:12},b={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px dashed #eee"},v={background:"#f3f4f6",padding:"2px 6px",borderRadius:6,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:12},S={border:"1px solid #e5e7eb",borderRadius:8,padding:10,background:"#fafafa"},w={whiteSpace:"pre-wrap",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:12},T={border:"1px solid #e5e7eb",borderRadius:999,padding:"4px 10px",fontSize:12,background:"#f8fafc"},_={position:"fixed",inset:0,background:"rgba(0,0,0,0.25)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},k={background:"#fff",borderRadius:12,padding:18,width:"min(680px, 92vw)",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},chip=e=>({border:"1px solid #d1d5db",borderRadius:999,padding:"6px 10px",background:e?"#111827":"#fff",color:e?"#fff":"#111827",cursor:"pointer"})},8960:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var s=[],l=!1,o=-1;function cleanUpNextTick(){l&&r&&(l=!1,r.length?s=r.concat(s):o=-1,s.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=s.length;t;){for(r=s,s=[];++o<t;)r&&r[o].run();o=-1,t=s.length}r=null,l=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new Item(e,t)),1!==s.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function __nccwpck_require__(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},s=!0;try{t[e](i,i.exports,__nccwpck_require__),s=!1}finally{s&&delete n[e]}return i.exports}__nccwpck_require__.ab="//";var r=__nccwpck_require__(229);e.exports=r}()},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!o.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:l.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,n){"use strict";e.exports=n(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=3266)}),_N_E=e.O()}]);