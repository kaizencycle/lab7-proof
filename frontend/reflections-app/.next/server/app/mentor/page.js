(()=>{var e={};e.id=125,e.ids=[125],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},1834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var n=s(7096),i=s(6132),r=s(7284),l=s.n(r),a=s(2564),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);s.d(t,o);let d=["",{children:["mentor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,247)),"C:\\Users\\mikej\\Desktop\\lab7-proof\\frontend\\reflections-app\\app\\mentor\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5345)),"C:\\Users\\mikej\\Desktop\\lab7-proof\\frontend\\reflections-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mikej\\Desktop\\lab7-proof\\frontend\\reflections-app\\app\\mentor\\page.tsx"],p="/mentor/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/mentor/page",pathname:"/mentor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6366:(e,t,s)=>{Promise.resolve().then(s.bind(s,4969))},4969:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>MentorPage});var n=s(784),i=s(9885);let r=process.env.NEXT_PUBLIC_OAA_API_BASE;async function j(e,t){let s=await fetch(`${r}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!s.ok)throw Error(`${e} -> ${s.status}`);return s.json()}let l={health:()=>j("/health"),keys:()=>j("/.well-known/oaa-keys.json"),filter:e=>j("/oaa/filter",{method:"POST",body:JSON.stringify(e)}),ingest:e=>j("/oaa/ingest/snapshot",{method:"POST",body:JSON.stringify(e)}),verify:e=>j("/oaa/verify",{method:"POST",body:JSON.stringify(e)}),sources:()=>j("/oaa/sources")};function sentences(e){return e.split(/(?<=[\.\?\!])\s+/g).map(e=>e.trim()).filter(Boolean)}function normTokens(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(Boolean)}function jaccard(e,t){let s=new Set(normTokens(e)),n=new Set(normTokens(t)),i=new Set([...s].filter(e=>n.has(e))).size,r=new Set([...s,...n]).size||1;return i/r}function synthesizeWeighted(e,t){let s=new Map;Object.entries(e).forEach(([e,n])=>{let i=t[e]??0;i<=0||sentences(n).forEach(e=>{let t=e.trim();t&&s.set(t,(s.get(t)||0)+i)})});let n=[...s.entries()].sort((e,t)=>t[1]-e[1]||t[0].length-e[0].length).map(([e])=>e),i=[];return n.forEach(e=>{let t=i.some(t=>jaccard(t,e)>.85);t||i.push(e)}),i.length>0&&(i.unshift("**Thesis:**"),i.push("\n**Examples:**\n- …\n- …"),i.push("\n**Takeaway:** …")),i.join(" ")}function MentorPage(){let[e,t]=(0,i.useState)("michael"),[s,r]=(0,i.useState)("michael"),[C,T]=(0,i.useState)(null),[O,A]=(0,i.useState)(!1),[P,R]=(0,i.useState)("Explain gravity to a teen."),[z,D]=(0,i.useState)(""),[E,M]=(0,i.useState)(!1),[q,B]=(0,i.useState)(null),[W,I]=(0,i.useState)(null),[N,$]=(0,i.useState)(null),[G,J]=(0,i.useState)({}),[U,F]=(0,i.useState)(!1),[H,L]=(0,i.useState)(["gemini","claude","deepseek","perplexity"]),[X,V]=(0,i.useState)({}),K=(0,i.useRef)(!1),[Y,Q]=(0,i.useState)(!1),[Z,ee]=(0,i.useState)({gemini:.25,claude:.25,deepseek:.25,perplexity:.25}),[et,es]=(0,i.useState)(!1),[en,ei]=(0,i.useState)(null),[er,el]=(0,i.useState)(null),[ea,eo]=(0,i.useState)(null),[ed,ec]=(0,i.useState)(null),[ep,eu]=(0,i.useState)("");(0,i.useEffect)(()=>{e&&!K.current&&(async()=>{try{A(!0);let t={session_id:`session_${Date.now()}`,mentors:H,started_at:new Date().toISOString()};r(e),T(t.session_id),K.current=!0,I({wallet:`wallet_${e}`,balance:100,last_tx_id:null})}catch(e){$(e.message??String(e))}finally{A(!1)}})()},[e]),(0,i.useEffect)(()=>{(async()=>{try{el(await l.health()),eo(await l.keys())}catch(e){eu(e.message)}})()},[]);let eh=(0,i.useMemo)(()=>!!C&&!!s&&P.trim()&&z.trim(),[C,s,P,z]);async function onSubmit(){try{M(!0),$(null);let e={attestation_id:`attest_${Date.now()}`,xp_awarded:Math.floor(50*Math.random())+10,level_before:1,level_after:2,reward_tx_id:`tx_${Date.now()}`,balance_after:150};B(e),I(t=>t?{...t,balance:e.balance_after||t.balance}:null)}catch(e){$(e.message??String(e))}finally{M(!1)}}async function getDrafts(){if(C&&P.trim())try{F(!0),$(null);let e={gemini:"This is a mock response from Gemini about the topic.",claude:"Here's Claude's perspective on the subject matter.",deepseek:"DeepSeek provides this analysis of the question.",perplexity:"Perplexity offers this comprehensive answer."};J(e);let t=Object.keys(e);V(Object.fromEntries(t.map(e=>[e,!0])))}catch(e){$(e.message??String(e))}finally{F(!1)}}function insertDraft(e){D(t=>t?t+"\n\n---\n"+e:e)}function toggleMentor(e){L(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}function toggleChecked(e){V(t=>({...t,[e]:!t[e]}))}function onCombineSimple(){let e=Object.entries(X).filter(([e,t])=>t).map(([e])=>e);if(0===e.length)return;let t=Object.fromEntries(e.map(e=>[e,1])),s=synthesizeWeighted(Object.fromEntries(e.map(e=>[e,G[e]])),t);insertDraft(s)}function onCombineWeighted(){Q(!0)}function applyWeights(){let e=Object.keys(G).filter(e=>(Z[e]??0)>0);if(0===e.length)return Q(!1);let t={};e.forEach(e=>{t[e]=G[e]});let s=synthesizeWeighted(t,Z);insertDraft(s),Q(!1)}async function runCritique(){if(C&&z.trim())try{es(!0),$(null),ei({rubric:{accuracy:4,depth:3,originality:4,integrity:5},critique:"This is a mock critique of your answer. The response shows good understanding of the topic with accurate information and demonstrates integrity in the approach."})}catch(e){$(e.message??String(e))}finally{es(!1)}}let runOaaVerify=async()=>{try{let e={statement:"hello",sig:"",pub:"",ts:new Date().toISOString()};ec(await l.verify(e))}catch(e){eu(e.message)}};return(0,n.jsxs)("div",{style:{maxWidth:1100,margin:"40px auto",padding:"0 20px",lineHeight:1.5},children:[n.jsx("h1",{children:"Lab7 — Online Apprenticeship Agent"}),n.jsx("p",{style:{marginTop:4,opacity:.85},children:n.jsx("em",{children:'"Initializing Lab7-proof (OAA) — Mentor–Apprentice Integrity Framework."'})}),(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"\uD83E\uDDE0 OAA Console"}),ep&&(0,n.jsxs)("div",{style:{color:"#b00020",marginBottom:12},children:["OAA Error: ",ep]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,n.jsxs)("div",{style:f,children:[n.jsx("h4",{style:{marginTop:0,marginBottom:8},children:"Health"}),n.jsx("pre",{style:S,children:JSON.stringify(er,null,2)})]}),(0,n.jsxs)("div",{style:f,children:[n.jsx("h4",{style:{marginTop:0,marginBottom:8},children:"Current Public Keys"}),n.jsx("pre",{style:S,children:JSON.stringify(ea,null,2)})]})]}),(0,n.jsxs)("div",{style:{marginTop:12},children:[n.jsx("h4",{style:{marginTop:0,marginBottom:8},children:"Verify (sample)"}),n.jsx("button",{style:x,onClick:runOaaVerify,children:"Run verify"}),ed&&n.jsx("pre",{style:{...S,marginTop:8},children:JSON.stringify(ed,null,2)})]})]}),(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"1) User"}),(0,n.jsxs)("div",{style:o,children:[n.jsx("label",{style:d,children:"Handle"}),n.jsx("input",{style:c,value:e,onChange:e=>{K.current=!1,t(e.target.value),T(null),B(null),I(null),J({}),V({}),ei(null)},placeholder:"your-handle"})]}),n.jsx("div",{style:{fontSize:14,opacity:.8,marginTop:8},children:O?"Starting session...":C?`Session: ${C}`:"No session yet"})]}),(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"2) Task"}),(0,n.jsxs)("div",{style:o,children:[n.jsx("label",{style:d,children:"Prompt"}),n.jsx("textarea",{style:p,rows:3,value:P,onChange:e=>R(e.target.value)})]}),(0,n.jsxs)("div",{style:{...o,marginTop:4},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Mentors"}),n.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:["gemini","claude","deepseek","perplexity"].map(e=>(0,n.jsxs)("label",{style:chip(H.includes(e)),children:[n.jsx("input",{type:"checkbox",checked:H.includes(e),onChange:()=>toggleMentor(e),style:{marginRight:6}}),e]},e))}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:10},children:[n.jsx("button",{style:h,disabled:!C||U||0===H.length,onClick:getDrafts,children:U?"Getting drafts…":"Get Drafts"}),n.jsx("button",{style:x,disabled:0===Object.keys(G).length,onClick:onCombineSimple,children:"Combine Selected → Answer"}),n.jsx("button",{style:g,disabled:0===Object.keys(G).length,onClick:onCombineWeighted,children:"Synthesize (weights)"})]})]}),Object.keys(G).length>0&&(0,n.jsxs)("div",{style:{...f,marginTop:12},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Drafts"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:Object.entries(G).map(([e,t])=>(0,n.jsxs)("div",{style:v,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6},children:[n.jsx("input",{type:"checkbox",checked:!!X[e],onChange:()=>toggleChecked(e)}),n.jsx("strong",{style:{textTransform:"capitalize"},children:e})]}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{style:x,onClick:()=>insertDraft(t),children:"Insert"})})]}),n.jsx("pre",{style:S,children:t})]},e))})]}),(0,n.jsxs)("div",{style:o,children:[n.jsx("label",{style:d,children:"Your Answer"}),n.jsx("textarea",{style:p,rows:10,value:z,onChange:e=>D(e.target.value)})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[n.jsx("button",{style:u,disabled:!eh||E,onClick:onSubmit,children:E?"Submitting…":"Submit for Rubric → XP → Attest → Reward"}),n.jsx("button",{style:x,disabled:!z.trim()||et,onClick:runCritique,children:et?"Critiquing…":"Critique Answer"})]}),N&&(0,n.jsxs)("div",{style:{marginTop:12,color:"#b00020",whiteSpace:"pre-wrap"},children:[n.jsx("strong",{children:"Error:"})," ",N]})]}),en&&(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"Critique & Rubric"}),n.jsx("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:8},children:["accuracy","depth","originality","integrity"].map(e=>(0,n.jsxs)("div",{style:k,children:[(0,n.jsxs)("strong",{style:{textTransform:"capitalize"},children:[e,":"]})," ",en.rubric[e]," / 5"]},e))}),n.jsx("pre",{style:S,children:en.critique})]}),(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"3) Results"}),q?(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,n.jsxs)("div",{style:f,children:[(0,n.jsxs)("div",{style:m,children:[n.jsx("span",{children:"XP Awarded"}),n.jsx("strong",{children:q.xp_awarded})]}),(0,n.jsxs)("div",{style:m,children:[n.jsx("span",{children:"Level"}),(0,n.jsxs)("strong",{children:[q.level_before," → ",q.level_after]})]}),(0,n.jsxs)("div",{style:m,children:[n.jsx("span",{children:"Attestation"}),n.jsx("code",{style:b,children:q.attestation_id})]})]}),(0,n.jsxs)("div",{style:f,children:[(0,n.jsxs)("div",{style:m,children:[n.jsx("span",{children:"Reward Tx"}),n.jsx("code",{style:b,children:q.reward_tx_id??"—"})]}),(0,n.jsxs)("div",{style:m,children:[n.jsx("span",{children:"Balance After"}),n.jsx("strong",{children:q.balance_after??"—"})]})]})]}):n.jsx("div",{style:{opacity:.7},children:"No submission yet."})]}),(0,n.jsxs)("section",{style:a,children:[n.jsx("h3",{style:y,children:"4) Wallet"}),W?(0,n.jsxs)("div",{style:{display:"flex",gap:24,flexWrap:"wrap"},children:[(0,n.jsxs)("div",{children:[n.jsx("strong",{children:"Wallet:"})," ",n.jsx("code",{style:b,children:W.wallet})]}),(0,n.jsxs)("div",{children:[n.jsx("strong",{children:"Balance:"})," ",W.balance]})]}):n.jsx("div",{style:{opacity:.7},children:"No balance yet."})]}),Y&&n.jsx("div",{style:w,children:(0,n.jsxs)("div",{style:_,children:[n.jsx("h3",{style:{marginTop:0},children:"Synthesize (weights)"}),n.jsx("p",{style:{marginTop:-6,opacity:.8},children:"Adjust mentor weights (sum doesn't need to be 1; we normalize internally)."}),Object.keys(G).map(e=>(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr 50px",gap:10,alignItems:"center",marginBottom:8},children:[n.jsx("div",{style:{textTransform:"capitalize"},children:e}),n.jsx("input",{type:"range",min:0,max:100,step:5,value:(Z[e]??0)*100,onChange:t=>ee(s=>({...s,[e]:Number(t.target.value)/100}))}),(0,n.jsxs)("div",{children:[Math.round((Z[e]??0)*100),"%"]})]},e)),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:12},children:[n.jsx("button",{style:u,onClick:applyWeights,children:"Apply"}),n.jsx("button",{style:g,onClick:()=>Q(!1),children:"Cancel"})]})]})}),n.jsx("footer",{style:{marginTop:32,opacity:.7,fontSize:13},children:"Powered by OAA Orchestrator ↔ Rubric ↔ Citizen Shield ↔ GIC Indexer."})]})}let a={border:"1px solid #e5e7eb",borderRadius:12,padding:16,marginTop:16,background:"#fff"},o={display:"flex",flexDirection:"column",gap:8,marginBottom:12},d={fontWeight:600},c={padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:8,fontSize:14},p={...c,minHeight:120},u={padding:"10px 14px",borderRadius:8,border:"1px solid #111827",background:"#111827",color:"#fff",fontWeight:600,cursor:"pointer"},h={...u,background:"#ffffff",color:"#111827",borderColor:"#111827"},x={padding:"6px 10px",borderRadius:8,border:"1px solid #111827",background:"#111827",color:"#fff",fontWeight:600,cursor:"pointer",fontSize:12},g={padding:"6px 10px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",color:"#111827",cursor:"pointer",fontSize:12},y={marginTop:0,marginBottom:12},f={border:"1px solid #e5e7eb",borderRadius:10,padding:12},m={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px dashed #eee"},b={background:"#f3f4f6",padding:"2px 6px",borderRadius:6,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:12},v={border:"1px solid #e5e7eb",borderRadius:8,padding:10,background:"#fafafa"},S={whiteSpace:"pre-wrap",fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:12},k={border:"1px solid #e5e7eb",borderRadius:999,padding:"4px 10px",fontSize:12,background:"#f8fafc"},w={position:"fixed",inset:0,background:"rgba(0,0,0,0.25)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},_={background:"#fff",borderRadius:12,padding:18,width:"min(680px, 92vw)",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},chip=e=>({border:"1px solid #d1d5db",borderRadius:999,padding:"6px 10px",background:e?"#111827":"#fff",color:e?"#fff":"#111827",cursor:"pointer"})},247:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>o});var n=s(5153);let i=(0,n.createProxy)(String.raw`C:\Users\mikej\Desktop\lab7-proof\frontend\reflections-app\app\mentor\page.tsx`),{__esModule:r,$$typeof:l}=i,a=i.default,o=a},784:(e,t,s)=>{"use strict";e.exports=s(316).vendored["react-ssr"].ReactJsxRuntime}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[472,294],()=>__webpack_exec__(1834));module.exports=s})();